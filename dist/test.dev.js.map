{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./demo/test.js","webpack:///./src/csp/index.js","webpack:///./src/jsonp/index.js","webpack:///./src/objectType/index.js","webpack:///./src/safeEval/index.js","webpack:///./src/sandbox/index.js","webpack:///./src/shadowDocument/index.js","webpack:///./src/shadowFunction/index.js","webpack:///./src/shadowPreact/index.js","webpack:///./src/try-again/index.js","webpack:///./src/url/index.js","webpack:///./src/workerFunction/index.js"],"names":["window","seval","ShadowFunction","WorkerFunction","ShadowDocument","ShadowPreact","jsonp","url","then","data","console","log","csp","desc","meta","document","createElement","charset","setAttribute","getElementsByTagName","appendChild","addEventListener","arguments","onerror","JSONP_AUTO_INCREMENT_ID","sandbox","sandboxWindow","sandboxDocument","key","indexOf","shadowWindow","e","options","Promise","resolve","reject","callbackKey","callbackName","timeout","script","tryObj","payload","timeoutId","Object","prototype","toString","call","object2params","send","polls","abort","clearTimeout","removeEventListener","documentElement","removeChild","over","try","src","onload","setTimeout","navigator","onLine","stop","getObjectType","object","typeStr","objectType","exec","shadowSandbox","safeEval","eval","Sandbox","constructor","white","iframe","style","display","content","contentDocument","open","write","close","init","exit","contentWindow","head","body","context","parentNode","DOCUMENT","root","template","setting","shadowFunction","run","bind","shadowRoot","createShadowRoot","o","TREE","allowTagName","assign","__$template__","__$parallel__","parallel","uuid","node","parseInt","iterator","nodes","nextNode","createNodeIterator","NodeFilter","SHOW_ALL","walker","target","del","nodeType","Node","ELEMENT_NODE","removeElement","i","attributes","length","name","TEXT_NODE","removeTextNode","createTextNode","getParentId","nodeName","puuid","text","textContent","attri","allow","tagName","value","getAttribute","hasEventListener","event","shadowEvent","setCharacterData","char","k","observer","MutationObserver","records","record","type","attributeName","addedNodes","removedNodes","observe","subtree","childList","characterData","attributeOldValue","characterDataOldValue","scriptStr","shadowToString","Function","setAllowProtoProperties","runShadow","allowProtoProperties","Element","HTMLElement","HTMLBodyElement","HTMLDivElement","HTMLUListElement","HTMLLIElement","HTMLVideoElement","HTMLAudioElement","HTMLSelectElement","HTMLOptionElement","HTMLInputElement","HTMLSpanElement","HTMLDListElement","HTMLFontElement","HTMLHeadingElement","HTMLParagraphElement","tracker","getAllowProtoProperties","constructorName","properties","allowProperties","concat","proxy","origin","propNames","getOwnPropertyNames","safeSetter","safeGetter","Proxy","join","get","set","proxyEach","whitelist","valueType","action","runScript","that","apply","PREACR","TryAgain","task","wait","time","obj","kvArr","entries","forEach","v","callee","substring","code","Worker","URL","createObjectURL","Blob"],"mappings":"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","file":"test.dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./demo/test.js\");\n","import { ShadowFunction } from '../src/shadowFunction/index'\nimport { ShadowDocument } from '../src/shadowDocument/index'\nimport { ShadowPreact } from '../src/shadowPreact/index'\nimport { jsonp } from '../src/jsonp/index'\nimport { csp } from '../src/csp/index'\nimport { safeEval } from '../src/safeEval/index'\nimport { WorkerFunction } from '../src/workerFunction/index'\n\n// test\nwindow.seval = safeEval\nwindow.ShadowFunction = ShadowFunction\nwindow.WorkerFunction = WorkerFunction\nwindow.ShadowDocument = ShadowDocument\nwindow.ShadowPreact = ShadowPreact\n\n// csp(\"script-src 'self'; object-src 'none'; style-src cdn.example.org third-party.org; child-src https:; report-uri https://www.alibaba-inc.com/xss\")\n\njsonp({\n  url: \"http://suggest.taobao.com/sug?code=utf-8&q=iphoneX\"\n}).then((data) => {\n  console.log(\"jsonp:\", data)\n})\n","const csp = (desc) => {\n  const meta = document.createElement('meta')\n  meta.charset = 'utf-8'\n  meta.setAttribute('http-equiv', 'Content-Security-Policy')\n  meta.setAttribute('content', desc)\n  document.getElementsByTagName('head')[0].appendChild(meta)\n\n  window.addEventListener('error', function () {\n    this.console.log(arguments)\n  }, false)\n\n  window.onerror = function () {\n    this.console.log(arguments)\n  }\n}\n\nexport { csp }","import { Sandbox } from '../sandbox/index'\nimport { TryAgain } from '../try-again/index'\nimport { object2params } from '../url/index'\n\n// callback 自增 id\nlet JSONP_AUTO_INCREMENT_ID = 0\n\nconst sandbox = new Sandbox(true)\nconst sandboxWindow = sandbox.window\nconst sandboxDocument = sandboxWindow.document\n\n\n// 死亡沙箱覆盖\nfor (let key in sandboxWindow) {\n  if (['top', 'window', 'document', 'chrome', 'caches', 'location'].indexOf(key) !== -1) continue\n  try {\n    sandboxWindow[key] = shadowWindow[key]\n  } catch (e) {}\n}\n\nconst jsonp = function (options) {\n  return new Promise(function(resolve, reject) {\n    let { url, data, callbackKey, callbackName, timeout } = options\n    let script\n    let tryObj\n    let payload = ''\n    let timeoutId\n    data = data || {}\n    timeout = timeout || 30000\n    callbackKey = callbackKey || 'callback'\n    callbackName = callbackName || '__call__' + (++JSONP_AUTO_INCREMENT_ID)\n    data[callbackKey] = callbackName\n    sandboxWindow[callbackName] = (data) => {\n      delete sandboxWindow[callbackName]\n      if (Object.prototype.toString.call(data) == '[object Object]') {\n        resolve(data)\n      } else {\n        reject()\n      }\n    }\n    payload = object2params(data)\n\n    if (!url || typeof url !== 'string') return reject('params url is not defined')\n    url += (url.indexOf('?') != -1 ? '&' : '?') + payload\n\n    // 异常尝试\n    tryObj = new TryAgain(send, { timeout: 3000, polls: 2 })\n\n    // abort\n    function abort() {\n      clearTimeout(timeoutId)\n      window.removeEventListener(\"online\", send, false)\n      try {\n        sandboxDocument.documentElement.removeChild(script)\n      } catch (e) {}\n    }\n\n    // 错误处理\n    function over() {\n      abort()\n      tryObj.try()\n      if (tryObj.polls == 0) {\n        reject()\n      }\n    }\n\n    function send () {\n      script = sandboxDocument.createElement(\"script\")\n      script.charset = 'utf-8'\n      script.src = url\n\n      // failed\n      script.onerror = over\n      script.onload = () => {\n        abort()\n        tryObj.over()\n      }\n\n      sandboxDocument.documentElement.appendChild(script)\n    }\n    timeoutId = setTimeout(over, timeout)\n    send()\n\n    // 断网重连\n    if (navigator.onLine === false) {\n      tryObj.stop()\n      window.addEventListener(\"online\", send, false)\n    }\n  })\n}\nexport { jsonp }","const getObjectType = (object) => {\n  let typeStr = '' + object\n  let objectType = (/\\s*\\[(\\w+) (\\w+)\\]\\s*/.exec(typeStr) || [])\n\n  switch (objectType[1]) {\n    case 'object':\n      return objectType[2]\n    case 'native':\n      return 'native'\n  }\n\n  return 'unknow'\n}\n\nexport { getObjectType }","\"use strict\"\n\nimport { Sandbox } from '../sandbox/index'\n\n\n// snadbox && shadowSandbox\nconst shadowSandbox = new Sandbox()\nconst shadowWindow = shadowSandbox.window\nconst safeEval = shadowWindow.eval\n\nexport {\n  safeEval\n}\n","\"use strict\"\n\nclass Sandbox {\n  constructor(white) {\n    const sandbox = this.sandbox = this.iframe = document.createElement('iframe')\n    sandbox.setAttribute('sandbox', 'allow-scripts allow-same-origin')\n\n    sandbox.style.display = 'none'\n    document.documentElement.appendChild(sandbox)\n\n    this.content = this.sandbox.contentDocument\n    this.open().write('').close().init()\n\n    if (!white) {\n      this.exit()\n    }\n\n    return this\n  }\n\n  init() {\n    const contentWindow = this.sandbox.contentWindow\n    this.window = contentWindow.window\n    this.document = contentWindow.document\n    return this\n  }\n\n  open() {\n    this.content.open()\n    return this\n  }\n\n  write(head, body, context) {\n    if (head || body) {\n      context = '<!DOCTYPE html>' +\n        '<html>' +\n        '<head>' +\n        (head ? head : '') +\n        '</head>' +\n        '<body>' +\n        (body ? body : '') +\n        '</body>' +\n        '</html>'\n    } else {\n      context = '<head><meta charset=\"utf-8\"></head>'\n    }\n    this.content.write(context)\n    return this\n  }\n\n  close() {\n    this.content.close()\n    return this\n  }\n\n  exit() {\n    this.sandbox.src = 'about:blank'\n    this.sandbox.parentNode.removeChild(this.sandbox)\n  }\n}\n\nexport {\n  Sandbox\n}\n","\"use strict\"\n\nimport { ShadowFunction } from '../shadowFunction/index'\n\nconst DOCUMENT = document\n\n// ShadowDocument\nclass ShadowDocument {\n  constructor(root, template, setting) {\n    this.init(root, template, setting)\n\n    return this.shadowFunction.run.bind(this)\n  }\n\n  init(root, template, setting) {\n    let shadowRoot = root.createShadowRoot ? root.createShadowRoot() : root\n    this.template = template\n    this.o = 0\n    this.TREE = {\n      0: shadowRoot\n    }\n    this.allowTagName = {\n      'DIV': true,\n      'B': true,\n      'P': true,\n      'DL': true,\n      'DT': true,\n      'DD': true,\n      'EM': true,\n      'HR': true,\n      'UL': true,\n      'LI': true,\n      'OL': true,\n      'TD': true,\n      'TH': true,\n      'TR': true,\n      'TT': true,\n      'IMG': true,\n      'NAV': true,\n      'SUP': true,\n      'SUB': true,\n      'SPAN': true,\n      'FONT': true,\n      'STYLE': true,\n      'SMALL': true,\n      'LABEL': true,\n      'INPUT': true,\n      'TABLE': true,\n      'TBODY': true,\n      'THEAD': true,\n      'TFOOT': true,\n      'BUTTON': true,\n      'FOOTER': true,\n      'HEADER': true,\n      'BUTTON': true,\n      'STRONG': true\n    }\n\n    Object.assign(this.allowTagName, setting)\n\n    this.shadowFunction = new ShadowFunction({})\n    this.shadowFunction = this.shadowFunction(this.reject(this.template))({\n      __$template__: this.template,\n      __$parallel__: this.parallel.bind(this)\n    })\n  }\n\n  reject(template) {\n    let reject = `\n      __$parallel__(document.body);\n      __$parallel__ = null;\n      (function () {\n        var __$getEventTarget__ = function (object) {\n          if (!object) return\n          if ((object.__proto__ + '').indexOf('EventTarget') !== -1) {\n            return object.__proto__\n          } else {\n            return __$getEventTarget__(object.__proto__)\n          }\n        }\n        var __$EventTarget__ = __$getEventTarget__(window)\n        __$EventTarget__.addEventListener = function (name, fn, opt) {\n          let props = 'on-' + name\n          this.setAttribute(props, name)\n          if (this[props]) {\n            this[props].push(fn)\n          } else {\n            this[props] = [fn]\n          }\n        }\n        __$EventTarget__.removeEventListener = function (name, fn, opt) {\n          let props = 'on-' + name\n          this.removeAttribute(props)\n          if (!this[props]) return\n          let index = this[props].indexOf(fn)\n          if (index !== -1) {\n            this[props].splice(index, 1)\n          }\n        }\n      })();\n      window['$template'] = document.createElement('template');\n    `\n\n    return reject + 'window[\\'$template\\'].innerHTML = \\'' + template + '\\';'\n  }\n\n  uuid(node, uuid) {\n    uuid = parseInt(node.parentNode ? node.parentNode.uuid || 0 : 0)\n    uuid++\n    this.o++\n    uuid = uuid + '.' + this.o\n    if (!node.uuid) node.uuid = uuid\n    return uuid\n  }\n\n  iterator(nodes) {\n    if (nodes.nextNode) return nodes\n    return DOCUMENT.createNodeIterator(nodes, NodeFilter.SHOW_ALL, null, false)\n  }\n\n  walker(nodes, target, del) {\n    let node\n    while (node = nodes.nextNode()) {\n      if (node.uuid) continue\n      this.uuid(node)\n      switch (node.nodeType) {\n        case Node.ELEMENT_NODE:\n          if (del) {\n            this.removeElement(node, target)\n          } else {\n            this.createElement(node, target)\n            for (let i = 0; i < node.attributes.length; i++) {\n              this.setAttribute(node.attributes[i].name, node)\n            }\n          }\n          break\n        case Node.TEXT_NODE:\n          if (del) {\n            this.removeTextNode(node, target)\n          } else {\n            this.createTextNode(node, target)\n          }\n          break\n      }\n    }\n  }\n\n  getParentId(node, target) {\n    return (node.parentNode ? node.parentNode.uuid : target.uuid) || 0\n  }\n\n  createElement(node, target) {\n    let name = node.nodeName\n    let uuid = node.uuid\n    let puuid = this.getParentId(node, target)\n\n    switch (name) {\n      case !!this.allowTagName[name] ? name : null:\n        this.TREE[uuid] = DOCUMENT.createElement(name)\n        break\n      default:\n        throw \"The tag name provided ('\" + name + \"') is not a valid name.\"\n    }\n\n    this.TREE[puuid].appendChild(this.TREE[uuid])\n  }\n\n  removeElement(node, target) {\n    let uuid = node.uuid\n    let puuid = this.getParentId(node, target)\n\n    if (this.TREE[puuid] && this.TREE[uuid]) {\n      this.TREE[puuid].removeChild(this.TREE[uuid])\n      delete this.TREE[uuid]\n    }\n  }\n\n  createTextNode(node, target) {\n    let uuid = node.uuid\n    let puuid = this.getParentId(node, target)\n    let text = node.textContent\n\n    this.TREE[uuid] = DOCUMENT.createTextNode(text)\n    if (this.TREE[puuid]) {\n      this.TREE[puuid].appendChild(this.TREE[uuid])\n    }\n  }\n\n  removeTextNode(node, target) {\n    let uuid = node.uuid\n    let puuid = this.getParentId(node, target)\n\n    if (this.TREE[puuid] && this.TREE[uuid]) {\n      this.TREE[puuid].removeChild(this.TREE[uuid])\n      delete this.TREE[uuid]\n    }\n  }\n\n  setAttribute(name, node) {\n    let attri = this.TREE[node.uuid]\n    let allow = this.allowTagName[node.tagName]\n    let value = node.getAttribute(name)\n\n    switch (name) {\n      case 'on-click':\n      case 'on-touchstart':\n      case 'on-touchmove':\n      case 'on-touchend':\n      case 'on-focus':\n      case 'on-mouseover':\n      case 'on-mouseout':\n      case 'on-mousedown':\n      case 'on-mouseup':\n      case 'on-mousemove':\n      case 'on-change':\n      case 'on-select':\n      case 'on-keypress':\n      case 'on-keydown':\n      case 'on-keyup':\n      case 'on-submit':\n      case 'on-reset':\n        if (node.hasEventListener) return\n        node.hasEventListener = true\n        attri.addEventListener(value, (e) => {\n          this.shadowFunction.run(`\n            for (let i = 0; i < event.length; i++) {\n              let even = event[i]\n              try {\n                typeof(even) === 'function' && even.call(node, e)\n              } catch (e) {\n                console.log(e, 99)\n              }\n            }\n          `)({event: node[name], node, e: this.shadowEvent(e)})\n        }, false)\n        return\n    }\n\n    if (typeof(allow) === 'function') {\n      if (!allow(name, value)) {\n        return\n      }\n    }\n\n    if (attri) {\n      attri.setAttribute(name, value)\n    }\n  }\n\n  setCharacterData(node) {\n    let char = this.TREE[node.uuid]\n    if (char) char.textContent = node.textContent\n  }\n\n  shadowEvent(e) {\n    let event = {}\n    for (let k in e) {\n      switch (typeof(e[k]) ) {\n        case 'string':\n        case 'number':\n        case 'bollean':\n          event[k] = e[k]\n          break\n      }\n    }\n    return event\n  }\n\n  parallel(root) {\n    this.shadowFunction('observer()')({observer: () => {\n      new MutationObserver((records) => {\n        console.log(records, 8889)\n        for (let record of records) {\n          let target = record.target\n          switch (record.type) {\n            case \"attributes\":\n              this.setAttribute(record.attributeName, target)\n              break\n            case \"characterData\":\n              this.setCharacterData(target)\n              break\n            case \"childList\":\n              for (let node of record.addedNodes) {\n                this.walker(this.iterator(node), target)\n              }\n              for (let node of record.removedNodes) {\n                this.walker(this.iterator(node), target, true)\n              }\n              break\n          }\n        }\n      }).observe(root, {\n        subtree: true,\n        attributes: true,\n        childList: true,\n        characterData: true,\n        attributeOldValue: true,\n        characterDataOldValue: true\n      })\n    }})\n  }\n}\n\nexport {\n  ShadowDocument\n}\n","\"use strict\"\n\nimport { getObjectType } from '../objectType/index'\nimport { Sandbox } from '../sandbox/index'\nimport { safeEval } from '../safeEval/index'\n\n// ShadowFunction\nclass ShadowFunction {\n  constructor(scriptStr) {\n    this.sandbox = new Sandbox()\n    this.shadowToString = this.sandbox.window.Object.toString\n    this.ShadowFunction = this.sandbox.window.Function\n    this.init()\n\n    switch (typeof(scriptStr)) {\n      case 'object':\n        return this.setAllowProtoProperties(scriptStr)\n      case 'string':\n        return this.runShadow(scriptStr)\n      default:\n        throw 'Uncaught SyntaxError: Unexpected identifier'\n    }\n  }\n\n  init() {\n    this.allowProtoProperties = {\n      Node: [\n        'nodeName',\n        'nodeType',\n        'textContent'\n      ],\n      Element: [\n        'style',\n        'onblur',\n        'onfocus',\n        'onscroll',\n        'offsetWidth',\n        'offsetHeight',\n        'clientWidth',\n        'clientHeight',\n        'innerText',\n        'setAttribute',\n        'removeAttribute',\n        'createTextNode',\n        'addEventListener',\n        'getElementsByTagName'\n      ],\n      HTMLElement: [],\n      HTMLBodyElement: [],\n      HTMLDivElement: [],\n      HTMLUListElement: [],\n      HTMLLIElement: [],\n      HTMLVideoElement: [],\n      HTMLAudioElement: [],\n      HTMLSelectElement: [],\n      HTMLOptionElement: [],\n      HTMLInputElement: [],\n      HTMLSpanElement: [],\n      HTMLDListElement: [],\n      HTMLFontElement: [],\n      HTMLHeadingElement: [],\n      HTMLParagraphElement: []\n    }\n    this.tracker = () => {}\n  }\n\n  event(tracker) {\n    this.tracker = tracker\n  }\n\n  getAllowProtoProperties(constructorName) {\n    const properties = this.allowProtoProperties\n    let allowProperties = properties[constructorName]\n    if (typeof(allowProperties) == 'function') return allowProperties()\n    if (/HTML(\\w+)Element/.exec(constructorName)) {\n      allowProperties.concat(properties['HTMLElement'], properties['Element'], properties['Node'])\n    }\n    return allowProperties\n  }\n\n  setAllowProtoProperties(allowProperties) {\n    Object.assign(this.allowProtoProperties, allowProperties)\n    return this.runShadow.bind(this)\n  }\n\n  proxy(object, origin) {\n    let propNames = Object.getOwnPropertyNames(object)\n    let safeSetter = this.safeSetter.bind(this)\n    let safeGetter = this.safeGetter.bind(this)\n    return new Proxy(safeEval(`({${propNames.length ? propNames.join(':{},') + ':{}' : ''}})`), {\n      get (target, name) {\n        return safeGetter(object, name)\n      },\n      set: (target, name, value) => {\n        return safeSetter(origin, name, value)\n      }\n    })\n  }\n\n  proxyEach(object) {\n    if (!object) return safeEval('(undefined)')\n    let target = safeEval('({})')\n    let prototype = getObjectType(object)\n    let propNames = Object.getOwnPropertyNames(object)\n    let whitelist = this.getAllowProtoProperties(prototype)\n\n    if (whitelist) {\n      propNames = propNames.concat(whitelist)\n    }\n\n    for (let name of propNames) {\n      let value = object[name]\n      let valueType = typeof(value)\n\n      if (value) {\n        switch (valueType) {\n          case 'object':\n            if (value.toString.constructor === this.shadowToString.constructor) {\n              target[name] = value\n            } else {\n              target[name] = this.proxyEach(value)\n            }\n            break\n          case 'function':\n            target[name] = value.bind(object)\n            break\n          case 'string':\n          case 'number':\n          case 'bollean':\n            target[name] = value\n            break\n        }\n      }\n    }\n\n    return this.proxy(target, object)\n  }\n\n  safeSetter (object, name, value) {\n    let valueType = typeof(value)\n    let proxyEach = this.proxyEach.bind(this)\n    let ShadowFunction = this.ShadowFunction\n    let prototype = getObjectType(object)\n    let propNames = Object.getOwnPropertyNames(object)\n    let whitelist = this.allowProtoProperties[prototype]\n\n    if (whitelist) {\n      propNames = propNames.concat(whitelist)\n    }\n\n    if (propNames.indexOf(name) == -1) {\n      this.tracker({\n        object,\n        name,\n        action: 'write',\n        value\n      })\n      return\n    }\n\n    switch (valueType) {\n      case 'string':\n      case 'number':\n      case 'bollean':\n        object[name] = value\n        break\n      case 'function':\n        object[name] = new ShadowFunction('value', 'object', 'proxy', `\n          return function () {\n            return proxy(value.apply(object, arguments))\n          }`)(value, object, proxyEach)\n        break\n      default:\n        this.tracker({\n          object,\n          name,\n          action: 'write',\n          value\n        })\n        break\n    }\n\n    return\n  }\n\n  safeGetter (object, name) {\n    let value = object[name]\n    let valueType = typeof(value)\n    let proxyEach = this.proxyEach.bind(this)\n    let ShadowFunction = this.ShadowFunction\n    let prototype = getObjectType(object)\n    let propNames = Object.getOwnPropertyNames(object)\n    let whitelist = this.allowProtoProperties[prototype]\n\n    if (whitelist) {\n      propNames = propNames.concat(whitelist)\n    }\n\n    if (propNames.indexOf(name) == -1) {\n      this.tracker({\n        object,\n        name,\n        action: 'read'\n      })\n      return\n    }\n\n    // nor type\n    switch (valueType) {\n      case 'string':\n      case 'number':\n      case 'object':\n      case 'bollean':\n        return value\n      case 'function':\n        return new ShadowFunction('value', 'object', 'proxy', `\n          return function () {\n            return proxy(value.apply(object, arguments))\n          }`)(value, object, proxyEach)\n\n    }\n  }\n\n  runShadow(scriptStr) {\n    this.shadowFunction = new this.ShadowFunction('(function(apply){with(apply) {' + scriptStr + '}})(this)')\n    return this.runScript.bind(this)\n  }\n\n  runScript(that, event) {\n    let target = this.proxyEach(that)\n    event && this.event(event)\n    this.shadowFunction.apply(target)\n    return {\n      run: this.runShadow.bind(this),\n      proxy: this.proxyEach.bind(this),\n      sandbox: this.sandbox\n    }\n  }\n}\n\nexport {\n  ShadowFunction\n}\n","\"use strict\"\n\nimport { ShadowDocument } from '../shadowDocument/index'\n\nconst PREACR = `!function(){\"use strict\";function e(e,t){var n,o,r,i,l=A;for(i=arguments.length;i-- >2;)P.push(arguments[i]);t&&null!=t.children&&(P.length||P.push(t.children),delete t.children);while(P.length)if((o=P.pop())&&void 0!==o.pop)for(i=o.length;i--;)P.push(o[i]);else\"boolean\"==typeof o&&(o=null),(r=\"function\"!=typeof e)&&(null==o?o=\"\":\"number\"==typeof o?o+=\"\":\"string\"!=typeof o&&(r=!1)),r&&n?l[l.length-1]+=o:l===A?l=[o]:l.push(o),n=r;var a=new T;return a.nodeName=e,a.children=l,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==M.vnode&&M.vnode(a),a}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){null!=e&&(\"function\"==typeof e?e(t):e.current=t)}function o(n,o){return e(n.nodeName,t(t({},n.attributes),o),arguments.length>2?[].slice.call(arguments,2):n.children)}function r(e){!e.__d&&(e.__d=!0)&&1==E.push(e)&&(M.debounceRendering||W)(i)}function i(){var e;while(e=E.pop())e.__d&&x(e)}function l(e,t,n){return\"string\"==typeof t||\"number\"==typeof t?void 0!==e.splitText:\"string\"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function p(e,t){var n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",e):document.createElement(e);return n.__n=e,n}function c(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,o,r,i){if(\"className\"===t&&(t=\"class\"),\"key\"===t);else if(\"ref\"===t)n(o,null),n(r,e);else if(\"class\"!==t||i)if(\"style\"===t){if(r&&\"string\"!=typeof r&&\"string\"!=typeof o||(e.style.cssText=r||\"\"),r&&\"object\"==typeof r){if(\"string\"!=typeof o)for(var l in o)l in r||(e.style[l]=\"\");for(var l in r)e.style[l]=\"number\"==typeof r[l]&&!1===D.test(l)?r[l]+\"px\":r[l]}}else if(\"dangerouslySetInnerHTML\"===t)r&&(e.innerHTML=r.__html||\"\");else if(\"o\"==t[0]&&\"n\"==t[1]){var a=t!==(t=t.replace(/Capture$/,\"\"));t=t.toLowerCase().substring(2),r?o||e.addEventListener(t,_,a):e.removeEventListener(t,_,a),(e.__l||(e.__l={}))[t]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t)}}else if(\"list\"!==t&&\"type\"!==t&&!i&&t in e){try{e[t]=null==r?\"\":r}catch(e){}null!=r&&!1!==r||\"spellcheck\"==t||e.removeAttribute(t)}else{var u=i&&t!==(t=t.replace(/^xlink:?/,\"\"));null==r||!1===r?u?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase()):e.removeAttribute(t):\"function\"!=typeof r&&(u?e.setAttributeNS(\"http://www.w3.org/1999/xlink\",t.toLowerCase(),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t)}):e.setAttribute(t,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t)}))}else e.className=r||\"\"}function _(e){return this.__l[e.type](M.event&&M.event(e)||e)}function f(){var e,t;for(t=0;t<V.length;++t)e=V[t],M.afterMount&&M.afterMount(e),e.componentDidMount&&e.componentDidMount();V.length=0}function d(e,t,n,o,r,i){H++||(R=null!=r&&void 0!==r.ownerSVGElement,B=null!=e&&!(\"__preactattr_\"in e));var l=h(e,t,n,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--H||(B=!1,i||f()),l}function h(e,t,n,o,r){var i=e,l=R;if(null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if(\"function\"==typeof u)return N(e,t,n,o);if(R=\"svg\"===u||\"foreignObject\"!==u&&R,u+=\"\",(!e||!a(e,u))&&(i=p(u,R),e)){while(e.firstChild)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0)}var c=i.firstChild,s=i.__preactattr_,_=t.children;if(null==s){s=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)s[f[d].name]=f[d].value}return!B&&_&&1===_.length&&\"string\"==typeof _[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=_[0]&&(c.nodeValue=_[0]):(_&&_.length||null!=c)&&v(i,_,n,o,B||null!=s.dangerouslySetInnerHTML),g(i,t.attributes,s),R=l,i}function v(e,t,n,o,r){var i,a,u,p,s,_=e.childNodes,f=[],d={},v=0,y=0,g=_.length,b=0,w=t?t.length:0;if(0!==g)for(var C=0;C<g;C++){var x=_[C],N=x.__preactattr_,k=w&&N?x._component?x._component.__k:N.key:null;null!=k?(v++,d[k]=x):(N||(void 0!==x.splitText?!r||x.nodeValue.trim():r))&&(f[b++]=x)}if(0!==w)for(var C=0;C<w;C++){p=t[C],s=null;var k=p.key;if(null!=k)v&&void 0!==d[k]&&(s=d[k],d[k]=void 0,v--);else if(y<b)for(i=y;i<b;i++)if(void 0!==f[i]&&l(a=f[i],p,r)){s=a,f[i]=void 0,i===b-1&&b--,i===y&&y++;break}s=h(s,p,n,o),u=_[C],s&&s!==e&&s!==u&&(null==u?e.appendChild(s):s===u.nextSibling?c(u):e.insertBefore(s,u))}if(v)for(var C in d)void 0!==d[C]&&m(d[C],!1);while(y<=b)void 0!==(s=f[b--])&&m(s,!1)}function m(e,t){var o=e._component;o?k(o):(null!=e.__preactattr_&&n(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||c(e),y(e))}function y(e){e=e.lastChild;while(e){var t=e.previousSibling;m(e,!0),e=t}}function g(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)\"children\"===o||\"innerHTML\"===o||o in n&&t[o]===(\"value\"===o||\"checked\"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}function b(e,t,n){var o,r=F.length;e.prototype&&e.prototype.render?(o=new e(t,n),U.call(o,t,n)):(o=new U(t,n),o.constructor=e,o.render=w);while(r--)if(F[r].constructor===e)return o.__b=F[r].__b,F.splice(r,1),o;return o}function w(e,t,n){return this.constructor(e,n)}function C(e,t,o,i,l){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||l?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i)),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==o&&(1!==o&&!1===M.syncComponentUpdates&&e.base?r(e):x(e,1,l)),n(e.__r,e))}function x(e,n,o,r){if(!e.__x){var i,l,a,p=e.props,c=e.state,s=e.context,_=e.__p||p,h=e.__s||c,v=e.__c||s,y=e.base,g=e.__b,w=y||g,N=e._component,U=!1,S=v;if(e.constructor.getDerivedStateFromProps&&(c=t(t({},c),e.constructor.getDerivedStateFromProps(p,c)),e.state=c),y&&(e.props=_,e.state=h,e.context=v,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(p,c,s)?U=!0:e.componentWillUpdate&&e.componentWillUpdate(p,c,s),e.props=p,e.state=c,e.context=s),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!U){i=e.render(p,c,s),e.getChildContext&&(s=t(t({},s),e.getChildContext())),y&&e.getSnapshotBeforeUpdate&&(S=e.getSnapshotBeforeUpdate(_,h));var L,T,P=i&&i.nodeName;if(\"function\"==typeof P){var A=u(i);l=N,l&&l.constructor===P&&A.key==l.__k?C(l,A,1,s,!1):(L=l,e._component=l=b(P,A,s),l.__b=l.__b||g,l.__u=e,C(l,A,0,s,!1),x(l,1,o,!0)),T=l.base}else a=w,L=N,L&&(a=e._component=null),(w||1===n)&&(a&&(a._component=null),T=d(a,i,s,o||!y,w&&w.parentNode,!0));if(w&&T!==w&&l!==N){var W=w.parentNode;W&&T!==W&&(W.replaceChild(T,w),L||(w._component=null,m(w,!1)))}if(L&&k(L),e.base=T,T&&!r){var D=e,E=e;while(E=E.__u)(D=E).base=T;T._component=D,T._componentConstructor=D.constructor}}!y||o?V.push(e):U||(e.componentDidUpdate&&e.componentDidUpdate(_,h,S),M.afterUpdate&&M.afterUpdate(e));while(e.__h.length)e.__h.pop().call(e);H||r||f()}}function N(e,t,n,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===t.nodeName,p=a,c=u(t);while(r&&!p&&(r=r.__u))p=r.constructor===t.nodeName;return r&&p&&(!o||r._component)?(C(r,c,3,n,o),e=r.base):(i&&!a&&(k(i),e=l=null),r=b(t.nodeName,c,n),e&&!r.__b&&(r.__b=e,l=null),C(r,c,1,n,o),e=r.base,l&&e!==l&&(l._component=null,m(l,!1))),e}function k(e){M.beforeUnmount&&M.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;o?k(o):t&&(null!=t.__preactattr_&&n(t.__preactattr_.ref,null),e.__b=t,c(t),F.push(e),y(t)),n(e.__r,null)}function U(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function S(e,t,n){return d(n,e,{},!1,t,!1)}function L(){return{}}var T=function(){},M={},P=[],A=[],W=\"function\"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,E=[],V=[],H=0,R=!1,B=!1,F=[];t(U.prototype,{setState:function(e,n){this.__s||(this.__s=this.state),this.state=t(t({},this.state),\"function\"==typeof e?e(this.state,this.props):e),n&&this.__h.push(n),r(this)},forceUpdate:function(e){e&&this.__h.push(e),x(this,2)},render:function(){}});var j={h:e,createElement:e,cloneElement:o,createRef:L,Component:U,render:S,rerender:i,options:M};\"undefined\"!=typeof module?module.exports=j:window.preact=j}();`\n\n// ShadowFunction\nclass ShadowPreact {\n  constructor(script) {\n    return new ShadowDocument(document.body, '<div id=\"app\"></div>')(PREACR)().run(script)\n  }\n}\n\nexport {\n  ShadowPreact\n}\n","\nclass TryAgain {\n  constructor(task, options) {\n    this.task = task\n    this.options = options\n    this.polls = options.polls || 2\n    this.timeout = options.timeout || 3000\n    this.timeoutId = null\n  }\n\n  try () {\n    if (this.polls <= 0) return false\n    this.timeoutId = setTimeout(() => {\n      if (this.polls-- > 0) this.task() && this.try()\n    }, this.timeout)\n  }\n\n  stop () {\n    clearTimeout(this.timeoutId)\n  }\n\n  wait (time) {\n    this.timeout = time\n  }\n\n  over () {\n    this.stop()\n    this.polls = 0\n  }\n}\n\nexport { TryAgain }","const object2params = (obj) => {\n  let url = ''\n  ;(function (obj){\n    let kvArr = Object.entries(obj)\n    kvArr.forEach(v => {\n      if (Object.prototype.toString.call(v[1]) == '[object Object]') {\n        arguments.callee(v[1])\n      } else {\n        url += v.join('=') + '&'\n      }\n    })\n  })(obj)\n\n  return url.substring(0, url.length - 1)\n}\n\nexport { object2params }","class WorkerFunction {\n  constructor(code) {\n    code = typeof(code) === 'string' ? code : typeof(code) === 'function' ? Object.toString.call(code) : ''\n    // code = `self.addEventListener('message', function (event) { ` + code + ` }, false)`\n    return new Worker(URL.createObjectURL(new Blob([code])))\n  }\n}\n\nexport { WorkerFunction }"],"sourceRoot":""}